!function(t){var e={};function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e){var a={},n={},r={},i={},l={},d=550,o=400,c=30,s=d3.scale.linear().domain([0,1]).range([c,d-2*c]),p=d3.scale.linear().domain([0,2.5]).range([o-c,c]);function u(t){var e=d3.select("#"+t.type).append("div").attr("id",t.id).attr("class","filter");for(var n in e.append("h4").text(t.name),a[t.id]=new Set([]),t.options){var r=t.options[n];e.append("div").attr("id",r.id).attr("class","filter-option active").text(r.name).on("click",g(t,r)),a[t.id].add(r.value)}}function f(t){d3.select("#filter-buttons").append("div").attr("id",t.id+"-button").attr("class","filter-button").text(t.name).on("click",function(t){return function(){!function(t){d3.selectAll(".filter-button").classed("active",!1),d3.select("#"+t.id+"-button").classed("active",!0),d3.selectAll(".filter-tool").style("display","none");d3.select("#filter-space").select("#"+t.id).style("display","inline")}(t)}}(t))}function v(t){var e=d3.sliderHorizontal().domain([t.min,t.max]).default((t.max+t.min)/2).width(150).ticks(2).on("onchange",a=>{n[t.id]=(e.value()-t.min)/(t.max-t.min),_(),h(),k()}),a=d3.select("#filter-space").append("div").style("display","none").attr("class","filter-tool").attr("id",t.id);a.append("h3").text("Target Value:");a.append("div").attr("class","filter-slider").append("svg").attr("width",150).attr("height",50).append("g").call(e);n[t.id]=(e.value()-t.min)/(t.max-t.min)}function m(t){d3.select("#"+t.type);var e=d3.sliderHorizontal().max(1).default(.5).width(150).ticks(2).fill("blue").on("onchange",a=>{r[t.id]=e.value(),_(),h(),k(),j()}),a=d3.select("#"+t.id);a.append("h3").text("Importance:"),a.append("div").attr("class","filter-weight").append("svg").attr("width",150).attr("height",50).append("g").call(e),r[t.id]=e.value()}function g(t,e){return function(){!function(t,e){const n=a[t.id].has(e.value);n?a[t.id].delete(e.value):a[t.id].add(e.value);for(var r in i)i[r][t.id]===e.value&&(l[r]=n?0:y(i[r])?1:0);h();d3.select("#"+e.id).classed("active",!n)}(t,e)}}function y(t){for(var e in a){const n=a[e],r=t[e];if(!n.has(r))return!1}return!0}function h(){d3.select("#num-schools").remove(),d3.select("#college-list").remove();d3.select("#results").append("div").attr("id","college-list");var t=Object.keys(l).sort(function(t,e){return l[e]-l[t]}).slice(0,100),e=1;for(var a in t)id=Number(t[a]),void 0!==i[id]&&(x(i[id],e),e+=1);d3.select("#results").insert("div","#college-list").attr("id","num-schools")}function x(t,e){var a=d3.select("#college-list").append("div").attr("class","college-entry").attr("id","entry-"+t.super_opeid).on("click",function(t){return function(){!function(t){var e=d3.select("#school-details");e.html(""),e.append("h2").text(t.name),e.append("img").attr("src","data/pie-chart.png"),d3.selectAll(".selected-circle").classed("selected-circle",!1).attr("r",3).attr("fill","black"),d3.select("#id-"+t.super_opeid).classed("selected-circle",!0).attr("fill",d3.rgb("#ffdf00")).attr("r",15),d3.selectAll(".selected-entry").classed("selected-entry",!1),d3.select("#entry-"+t.super_opeid).classed("selected-entry",!0)}(t)}}(t));a.append("img").attr("src","data/college-pic.png");var n=a.append("div").attr("class","college-descr");n.append("div").attr("class","college-title").text(e.toString()+". "+t.name);var r=n.append("div").attr("class","college-subtitle");r.append("span").text("State: "+t.state),r.append("div").text(t.tier_name)}function b(t){var e=0,a=0;for(var i in n){var l=1-Math.abs(n[i]-t[i+"_norm"]);e+=r[i]*l,a+=r[i]}return e/a}function _(){for(var t in i)l[t]=b(i[t])}function j(){for(var t in r){var e=255-(150*r[t]+60);d3.select("#"+t+"-button").style("background-color","rgba(0,"+e.toString()+",255)")}}function k(){d3.select("#scatterplot").remove();var t=[];for(var e in i)t.push([l[e],Number(i[e].k_mean)/Number(i[e].par_mean),e]);var a=d3.axisBottom().scale(s).ticks(5),n=d3.axisLeft().scale(p).tickFormat(d3.format("")).ticks(5),r=d3.select("#graph").append("div").attr("class","tooltip").style("opacity",0),u=d3.select("#graph").append("svg").attr("id","scatterplot").attr("width",d).attr("height",o+c);u.selectAll("circle").data(t).enter().append("circle").attr("id",function(t){return"id-"+t[2]}).attr("cx",function(t){return s(t[0])+c}).attr("cy",function(t){return p(t[1])}).attr("r",3).attr("opacity",.5).on("mouseover",function(t){r.transition().duration(200).style("opacity",.9),r.html(i[t[2]].name).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(t){r.transition().duration(500).style("opacity",0)}),u.append("g").attr("transform","translate("+c+","+(o-c)+")").call(a),u.append("text").attr("transform","translate("+(d/2+c)+" ,"+(o-c/2+20)+")").style("text-anchor","middle").text("Match Score"),u.append("g").attr("transform","translate("+2*c+",0)").call(n),u.append("text").attr("transform","rotate(-90)").attr("y",0).attr("x",0-o/2).attr("dy","1em").style("text-anchor","middle").text("Ratio of Average Child to Parent Income")}d3.csv("data/college_data.csv",function(t){for(var e=0;e<t.length;e++){var a=t[e].super_opeid;i[a]={...t[e]}}d3.json("data/filter-options.json",function(t){for(var e in t){var a=t[e];u(a)}}),d3.json("data/slider-options.json",function(t){for(var e in t){var a=t[e];f(a),v(a),m(a)}_(),h(),k(),j()})})}]);